#!/usr/bin/env ruby

require 'rubygems'
gem 'sinatra'
require 'sinatra'


configure do
  set :public, File.expand_path('.')
end

get '/' do
  dir = File.expand_path('.')
  str = "<ul>" + (Dir[File.join(dir, '**', '*')].reject {|p| File.directory? p }.map {|p| p.sub %r{^#{dir}/}, ""}.map {|p| "<li><a href=\"#{p}\">#{p}</a></li>"} * "\n") + "</ul>"
  "#{dir}<br/>#{str}"
end 
